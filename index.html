<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
<title>Holiday Clock -- Auto Scale + Themes</title>

<style>
  :root{
    --fg: #ffffff;
    --bg: #000000;

    --shadow: rgba(0,0,0,0.55);
    --accent: #ffd24d;

    --size-date: 42px;
    --size-time: 200px;
    --size-count: 40px;
    --size-today: 46px;
  }

  html,body{
    height:100%;
    margin:0;
    background: var(--bg);
    color:var(--fg);
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
    -webkit-font-smoothing:antialiased;
    overflow:hidden;
    transition: background 0.6s linear, color 0.6s linear;
  }

  #root{
    position:relative;
    width:100%;
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  .layout {
    z-index:2;
    display:flex;
    width:94%;
    height:92%;
    max-width:1200px;
    justify-content:center;
    align-items:center;
  }

  .text-block {
    width:100%;
    text-align:center;
    user-select:none;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
  }

  /* Single-line fonts */
  #date, #countdown, #today {
    white-space: nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }

  #date {
    font-size: var(--size-date);
    margin: 0 0 8px 0;
    text-shadow:0 2px 10px var(--shadow);
  }

  #time {
    font-size: var(--size-time);
    margin: 0;
    line-height: 0.9;
    font-weight:700;
    white-space:nowrap;
    text-shadow:0 6px 16px var(--shadow);
  }

  #countdown {
    font-size: var(--size-count);
    margin-top:10px;
    text-shadow:0 4px 10px var(--shadow);
  }

  #today {
    margin-top:10px;
    font-size: var(--size-today);
    font-weight:700;
    text-shadow:0 6px 14px var(--shadow);
  }
</style>
</head>

<body>
<div id="root">
  <div class="layout">
    <div class="text-block">
      <div id="date"></div>
      <div id="time"></div>
      <div id="countdown"></div>
      <div id="today"></div>
    </div>
  </div>
</div>

<script>
/* -------- AUTOSCALE -------- */
const REF_W = 480, REF_H = 320;

const BASE = {
  date: 40,
  time: 200,
  count: 38,
  today: 44
};

function scaleUI(){
  const w = window.innerWidth;
  const h = window.innerHeight;

  let s = Math.min(w / REF_W, h / REF_H);
  s = Math.max(s, 0.55);
  s = Math.min(s, 3.0);

  document.documentElement.style.setProperty('--size-date',  (BASE.date * s) + "px");
  document.documentElement.style.setProperty('--size-time',  (BASE.time * s) + "px");
  document.documentElement.style.setProperty('--size-count', (BASE.count * s) + "px");
  document.documentElement.style.setProperty('--size-today', (BASE.today * s) + "px");
}

/* -------- HOLIDAYS + THEMES -------- */

const TWO_WEEKS = 14 * 24 * 60 * 60 * 1000;

const holidayThemes = {
  "4th of July": {
    backgrounds: ["#0A1A59","#8B0000","#001133"],
    texts:       ["#FFFFFF","#FFCCCC","#DDE7FF"]
  },
  "Thanksgiving": {
    backgrounds: ["#5A3310","#8C4B13","#C26A1B"],
    texts:       ["#FFF3E0","#FFE9C2","#FFDFA3"]
  },
  "Christmas": {
    backgrounds: ["#8B0000","#0F4D1A","#004C3F"],
    texts:       ["#FFFFFF","#FFE8A3","#FFFAF2"]
  },
  "New Year's": {
    backgrounds: ["#1A0033","#330066","#000000"],
    texts:       ["#FFD700","#FFFFFF","#E8D6FF"]
  }
};

/* Official dates */
const holidays = [
  { name:"New Year's",    m:1,  d:1 },
  { name:"4th of July",   m:7,  d:4 },
  { name:"Thanksgiving",  m:11, d:28 },  // (you can adjust if needed)
  { name:"Christmas",     m:12, d:25 }
];

function getHolidayWindow(){
  const now = new Date();
  const y = now.getFullYear();

  for (let h of holidays){
    let hd = new Date(y, h.m-1, h.d);
    if(hd < now) hd = new Date(y+1, h.m-1, h.d);

    const start = hd.getTime() - TWO_WEEKS;
    const end   = hd.getTime() + (24*60*60*1000); // 1 day after

    if(now.getTime() >= start && now.getTime() <= end){
      return { active: true, holiday: h.name, date: hd };
    }
  }
  return { active:false };
}

/* -------- CLOCK -------- */

const elDate = document.getElementById("date");
const elTime = document.getElementById("time");
const elCount = document.getElementById("countdown");
const elToday = document.getElementById("today");

function updateClock(){
  const now = new Date();

  elDate.textContent = now.toLocaleDateString(undefined,{
    weekday:"long", month:"long", day:"numeric"
  });

  let raw = now.toLocaleTimeString([], { hour:"numeric", minute:"2-digit" });
  elTime.textContent = raw.replace(/ ?[AP]M?/i, "");

  const hw = getHolidayWindow();

  if(hw.active){
    const diff = hw.date - now;
    const days = Math.floor(diff / (1000*60*60*24));

    if(days <= 0){
      elToday.textContent = "Happy " + hw.holiday + "!";
      elCount.textContent = "";
    } else {
      elToday.textContent = "";
      elCount.textContent = `${days} day${days!==1?"s":""} until ${hw.holiday}`;
    }
  } else {
    elToday.textContent = "";
    elCount.textContent = "";
  }
}

/* -------- COLOR CYCLING -------- */

let themeIndex = 0;

function cycleColors(){
  const hw = getHolidayWindow();

  if(!hw.active){
    document.documentElement.style.setProperty('--bg', "#000000");
    document.documentElement.style.setProperty('--fg', "#FFFFFF");
    return;
  }

  const t = holidayThemes[hw.holiday];
  if(!t) return;

  const i = themeIndex % t.backgrounds.length;

  document.documentElement.style.setProperty('--bg', t.backgrounds[i]);
  document.documentElement.style.setProperty('--fg', t.texts[i]);

  themeIndex++;
}

/* -------- INIT -------- */

function init(){
  scaleUI();
  updateClock();
  cycleColors();

  setInterval(updateClock, 1000);      // clock
  setInterval(cycleColors, 3000);      // color change every 3s

  window.addEventListener("resize", ()=>{ setTimeout(scaleUI, 100); });
  setTimeout(scaleUI, 300);
}

init();
</script>
</body>
</html>